<!DOCTYPE html>
<!-- This is a comment to test something, again, again, again (add agaom every edit)-->
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>AssetHoarder</title>
        <!-- Style -->
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="betterNavBar.css">
        <link rel="stylesheet" href="signupLogin.css">
        <!-- Scripts -->
        <script defer src="search.js"></script>
        <script defer src="signupLogin.js"></script>
        <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
        <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
        <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    </head>
    <body>
        
        <!-- Navigation Bars -->
        <div class="topnav">
            <!-- <div class="logo"> -->
                <!--<img src="assets/logo.png">-->
                <!-- <a href="index.html">AssetHoarder</a> -->
            <!-- </div> -->
            <!--This can be updated later to look nicer. See navBar.css-->
            <ul>
                <li><a href="index.html">Home</a></li>
                    <!-- href is for a test link here. Change it to the homepage link later-->
                <li><button class="logSignButton" data-modal-target="#signup-modal">Signup</button></li>
                <li><button class="logSignButton" data-modal-target="#login-modal">Login</button></li>
                <li><a href="profile.html">Profile</a></li>
                    <!-- Profile should go to another page
                     or prompt them to log in if they haven't already -->            
            </ul>

            <!-- Signup form -->
            <form class="signup" id="signup-modal">
                <div class="signup-modal-header">
                    <div class ="title">Signup</div>
                    <button data-close-button class="close-button">&times;</button>
                </div>
                <div class="signup-modal-body">
                    <div><label for="email"><b>Email</b></label></div>
                    <div class="vert-pad"><input type="text" placeholder="Enter Email" name="email" pattern="[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-z]{2,}$" maxlength="256" required /></div>
                    
                    <div><label for="username"><b>Username</b></label></div>
                    <div><input type="text" id="new-user" placeholder="Enter your username" name="username" maxlength="16" minlength="3" pattern="^[a-zA-Z0-9_]+$" onkeyup='properUser();' required /></div>
                    <div class="usernameNotes vert-pad" id="usernameNotes">Your username must be at least 3 chararacters and only include letters, numbers, and underscores.</div>

                    <div><label for="psw"><b>Password</b></label></div>
                    <div><input type="password" id="new-pass" placeholder="Enter Password" name="psw" minlength="8" maxlength="32" onkeyup='properPass(); passConfirm();' pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,32}$" required /></div>
                    <div class="passwordNotes vert-pad" id="passwordNotes">
                        Your password must be between 8 and 32 characters and contain at least one lowercase letter, one uppercase letter, a number, and a special character (@, $, !, %, *, ?, or &).
                    </div>

                    <div><label for="psw-repeat"><b>Repeat Password</b></label></div>
                    <div><input type="password" id="new-pass-rep" placeholder="Repeat Password" name="psw-repeat" minlength="8" maxlength="32" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,32}$" onkeyup='passConfirm();' required /></div>
                    <div class="passwordNotes vert-pad" id="pass-match-output">&#x2716; Passwords do NOT match!</div>
                    
                    <div><button type="submit" class="signup-button">Sign Up!</button></div>
                </div>            
            </form>
            
            <!-- Login form -->
            <form class="login" id="login-modal">
                <div class="login-modal-header">
                    <div class ="title">Login</div>
                    <button data-close-button class="close-button">&times;</button>
                </div>
                <div class="login-modal-body">
                    <div><label for="login"><b>Username or Email</b></label></div>
                    <div><input type="text" placeholder="Username or Email" name="email" pattern="[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-z]{2,}|[a-zA-Z0-9_]+$" minlength="3" maxlength="256" required /></div>

                    <div><label for="psw"><b>Password</b></label></div>
                    <div><input type="password" placeholder="Enter Password" name="psw" maxlength="32" required /></div>
                    
                    <!-- Add actions. Post db/login and db/create_account-->
                    <button type="submit" class="login-button">Log In!</button>

                </div>            
            </form>
            
            <!-- Overlay to dim background -->
            <div id="overlay"></div>
        </div> <!-- End navbar code -->       

        <div id="search-page">
            <!-- <div id="search-bg"></div> -->
            <div id="search-interface">
                <div>
                    <div id="search-logo"><img src="img/logo.png" /></div>
                    <input id="main-searchbar" placeholder="Search the hoard" maxlength="256" autofocus oninput="document.getElementById('explore-button').innerHTML='Search'">
                </div>
                <div id="content-filters">
                    <div>
                        <img src="img/images.png" class="filter-toggle-button" onclick="toggleFilter(this.parentElement);" />
                        <div class="filter-menu">
                            <div class="filter-menu-margin">
                                <h2>Type</h2>
                                <div id="img-type-filters">
                                    <button value="photos" class="toggle-button" onclick="toggleButton(this);">Photos</button>
                                    <button value="icons" class="toggle-button" onclick="toggleButton(this);">Icons</button>
                                    <button value="textures" class="toggle-button" onclick="toggleButton(this);">Textures</button>
                                    <button value="sprites" class="toggle-button" onclick="toggleButton(this);">Sprites</button>
                                </div>
                                <hr>
                                <h2>Size</h2>
                                <div id="img-size-filters">
                                    <button value="square" class="toggle-button" onclick="toggleButton(this);">Square</button>
                                    <button value="wide" class="toggle-button" onclick="toggleButton(this);">Wide</button>
                                    <button value="tall" class="toggle-button" onclick="toggleButton(this);">Tall</button>
                                    <button value="16:9" class="toggle-button" onclick="toggleButton(this);">16:9</button>
                                    <button value="4:3" class="toggle-button" onclick="toggleButton(this);">4:3</button>
                                </div>
                                <hr>
                                <h2>Color</h2>
                                <div id="img-color-filters" style="display:flex; justify-content:space-around;">
                                    <button value="red" class="color-button" onclick="toggleButton(this);" style="background-color:red;"></button>
                                    <button value="orange" class="color-button" onclick="toggleButton(this);" style="background-color:orange;"></button>
                                    <button value="yellow" class="color-button" onclick="toggleButton(this);" style="background-color:yellow;"></button>
                                    <button value="green" class="color-button" onclick="toggleButton(this);" style="background-color:green;"></button>
                                    <button value="blue" class="color-button" onclick="toggleButton(this);" style="background-color:blue;"></button>
                                    <button value="purple" class="color-button" onclick="toggleButton(this);" style="background-color:purple;"></button>
                                </div>
                                <hr>
                            </div>
                        </div>
                    </div>
                    <div>
                        <img src="img/audio.png" class="filter-toggle-button" onclick="toggleFilter(this.parentElement);" />
                        <div class="filter-menu">
                            <div class="filter-menu-margin">
                                <h2>Type</h2>
                                <div id="audio-type-filters">
                                    <button value="music" class="toggle-button" onclick="toggleButton(this);">Music</button>
                                    <button value="effect" class="toggle-button" onclick="toggleButton(this);">Sound Effects</button>
                                    <button value="ambient" class="toggle-button" onclick="toggleButton(this);">Ambient</button>
                                    <button value="voice" class="toggle-button" onclick="toggleButton(this);">Voice</button>
                                </div>
                                <hr>
                                <h2>Duration</h2>
                                <input name="duration" type="text">
                                <hr>

                            </div>
                        </div>
                    </div>
                    <div>
                        <img src="https://edusasha.com/wp-content/uploads/2017/05/video.png" class="filter-toggle-button" onclick="toggleFilter(this.parentElement);" />
                        <div class="filter-menu">
                            <div class="filter-menu-margin">
                                <div>

                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <img src="https://cdn-icons-png.flaticon.com/128/1724/1724090.png" class="filter-toggle-button" onclick="toggleFilter(this.parentElement);" />
                        <div class="filter-menu">
                            <div class="filter-menu-margin">
                                <div>
                                    <button class="toggle-button" onclick="toggleButton(this);">Characters</button>
                                    <button class="toggle-button" onclick="toggleButton(this);">Objects</button>
                                    <button class="toggle-button" onclick="toggleButton(this);">Environments</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="explore-button" onclick="search(random=true);">
                Explore
            </div> 
        </div>

        <div id="browse-page" style="display:none;">
            <div id="browse-anchor" style="height:50px;"></div> <!-- Buffer -->
            <div id="browse-content">
                <script>

                document.getElementById("search-logo").style.height = Math.min((document.getElementById("main-searchbar").getBoundingClientRect().top - document.getElementById("search-interface").getBoundingClientRect().top - 20), 150 ) + "px";
                document.getElementById("search-logo").style.top = "-" + (document.getElementById("search-logo").getBoundingClientRect().bottom - document.getElementById("search-logo").getBoundingClientRect().top + 20) + "px";

                function toggleFilter(filterElement)
                {
                    filterElement.classList.toggle("selected");
                    if (filterElement.classList.contains("selected"))
                    {
                        document.getElementById("content-filters").classList.add("selected");

                        setTimeout(() => {
                            filterElement.children[1].children[0].style.display = "block";
                        }, 100);
                    }
                    else
                    {
                        filterElement.children[1].children[0].style.display = "none";
                        filterElement.classList.add("selected");
                        setTimeout(() => {
                            filterElement.classList.remove("selected");
                            let found = false;
                            for (var child of document.getElementById("content-filters").children)
                            {
                                found = found || child.classList.contains("selected");
                            }
                            if (!found)
                                document.getElementById("content-filters").classList.remove("selected");
                        }, 0o0);
                    }
                }

                function toggleButton(button)
                {
                    button.classList.toggle("selected");
                }

                </script>
                
            </div>
        </div>

    </body>
</html>
